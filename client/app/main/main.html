<navbar></navbar>

<div class="container">
  <div class="row row-offcanvas row-offcanvas-left">
    <div class="col-lg-12">
      <div class="alert alert-warning" role="alert">
        <b>ProteoBIF</b> est toujours en d√©veloppement.
          <br>
          Vos commentaires et suggestions sont les bienvenus, contactez: <a href="mailto:jeremy.geo@gmail.com">jeremy.geo@gmail.com</a>.
          <br>
          Pour plus d'information, <a href="/devel">cliquez-ici</a>.
      </div>
    </div>
    <div class="col-lg-12">

      <ol class="breadcrumb">
        <li class="active">
          <a ng-if="selectedProject" ng-click="reset()">Projects</a>
          <span ng-if="!selectedProject">Projects</span>
        </li>
        <li class="active" ng-if="selectedProject">
          <a ng-if="selectedDataset" ng-click="resetToProject()">{{selectedProject}}</a>
          <span ng-if="!selectedDataset">{{selectedProject}}</span>
        </li>
        <li class="active" ng-if="selectedDataset">
          {{selectedDataset}}
        </li>
      </ol>

      <div class="loading-spinner" ng-show="dataIsLoading">
        <span us-spinner="{radius:30, width:8, length: 16}" spinner-on="dataIsLoading"></span>
      </div>

      <div ng-show="data.projects && !selectedProject">
        <h4>Available projects</h4>
        <small class="text-muted">
          Authorization must be requested for projects marked with the <span class="glyphicon glyphicon-lock"></span> icon.</small>
        <br>
        <br>
        <table ng-table="table.projects" class="table table-condensed table-bordered table-striped" show-filter="true">
          <tr ng-repeat="row in $data">
            <td  data-title="'Name'" filter="{name: 'text'}" sortable="'name'" class="col-lg-2">
              <a ng-if="row.authorized" ng-click="getDatasets(row.name)">{{row.name}}</a>
              <span ng-if="!row.authorized" class="text-muted"><span class="glyphicon glyphicon-lock"></span>  {{row.name}}</span>
            </td>
            <td data-title="'Description'" class="col-lg-4">{{row.meta.description}}</td>
            <td data-title="'Owner'" class="col-lg-2">{{row.meta.owner}}</td>
            <td data-title="'Datasets'" sortable="'quantity'" class="col-lg-1 text-center">{{row.datasets.length}}</td>
            <td data-title="'Created'" sortable="'meta.dateCreated'" class="col-lg-1 text-center">{{row.meta.dateCreated | date:'MM/dd/yyyy'}}</td>
          </tr>
        </table>
      </div>

      <div ng-show="data.datasets && !selectedDataset">
        <h4>Available datasets</h4>
        <br>
        <table ng-table="table.datasets" class="table table-condensed table-bordered table-striped" show-filter="true">
          <tr ng-repeat="row in $data">
            <td  data-title="'Name'" filter="{name: 'text'}" sortable="'name'" class="col-lg-5">
              <a ng-click="getOrfs(row.name)">{{row.name}}</a></td>
            <td data-title="'Organism'" filter="{'organism': 'text'}" sortable="'organism'" class="col-lg-3 text-center">{{row.organism}}</td>
            <td data-title="'Orfs'" sortable="'quantity'" class="col-lg-1 text-center">{{row.orfs.length}}</td>
            <td data-title="'Date Created'" sortable="'meta.dateCreated'" class="col-lg-2 text-center">{{row.meta.dateCreated | date:'MM/dd/yyyy'}}</td>
          </tr>
        </table>
      </div>

      <div ng-show="data.orfs">
        <h4>Available orfs</h4>
        <p ng-click="resetData()" ng-show="dataSelect">
          <a><span class="glyphicon glyphicon-arrow-left"></span></span>  Return</a>
        </p>

        <table ng-table="table.orfs" class="table table-condensed table-bordered table-striped" show-filter="true">
          <tr ng-repeat="row in $data">
            <td data-title="'Name'" filter="{name: 'text'}" sortable="'name'" class="col-lg-4">
              <a href="/orf/{{selectedProject}}/{{selectedDataset}}/{{row.name}}">{{row.name}}</a>
            </td>
            <td data-title="'Disopred'" sortable="'disopred'" class="col-lg-1 text-center">
              <span class="glyphicon present-icon"
                    ng-class="{'glyphicon-ok text-success': row.analyses.disopred, 'glyphicon-remove text-warning': !row.analyses.disopred}"></span>
            </td>
            <td data-title="'I-Tasser'" sortable="'itasser'" class="col-lg-1 text-center">
              <span class="glyphicon present-icon"
                    ng-class="{'glyphicon-ok text-success': row.analyses.itasser, 'glyphicon-remove text-warning': !row.analyses.itasser}"></span>
            </td>
            <td data-title="'TMHMM'" sortable="'tmhmm'" class="col-lg-1 text-center">
              <span class="glyphicon present-icon"
                    ng-class="{'glyphicon-ok text-success': row.analyses.tmhmm, 'glyphicon-remove text-warning': !row.analyses.tmhmm}"></span>
            </td>
            <td data-title="'Topcons'" sortable="'topcons'" class="col-lg-1 text-center">
              <span class="glyphicon present-icon"
                    ng-class="{'glyphicon-ok text-success': row.analyses.topcons, 'glyphicon-remove text-warning': !row.analyses.topcons}"></span>
            </td>
            <td data-title="'Start'" sortable="'meta.start'" class="col-lg-1 text-center">
              {{row.meta.start}}
            </td>
            <td data-title="'End'" sortable="'meta.end'" class="col-lg-1 text-center">
              {{row.meta.end}}
            </td>
            <td data-title="'Date Created'" sortable="'meta.dateCreated'" class="col-lg-2 text-center">{{row.meta.dateCreated | date:'MM/dd/yyyy'}}</td>
          </tr>
        </table>
      </div>

    </div>
  </div>
</div>

<footer></footer>
